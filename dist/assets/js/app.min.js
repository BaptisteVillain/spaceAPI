function curiosityPath(e,t,i){for(var s="M"+(keys[e].getBoundingClientRect().left+6.5)+" "+(keys[e].getBoundingClientRect().top+6.5)+" ",l=e+1;l<=t;l++){var n=keys[l].getBoundingClientRect();s+=" L"+(n.left+6.5)+" "+(n.top+6.5)}newpath=document.createElementNS("http://www.w3.org/2000/svg","path"),newpath.setAttributeNS(null,"d",s),i&&newpath.setAttribute("class","animate"),curiosity_path_svg.appendChild(newpath)}function svgInit(){var e=curiosity_path_svg.parentNode.getBoundingClientRect();curiosity_path_svg.setAttribute("viewBox","0 0 "+e.width+" "+e.height),curiosity_path_svg.setAttribute("width",e.width),curiosity_path_svg.setAttribute("height",e.height)}function setTimeline(e){for(var t=e;t<=e+9;t++)t>=0&&t<ressources.length?(timeline.items[t-e].setAttribute("href","?sol="+ressources[t].sol),timeline.items[t-e].classList.remove("hide"),timeline.items_infos[t-e].innerHTML=ressources[t].sol):(timeline.items[t-e].setAttribute("href","?sol="+ressources[ressources.length-1].sol),timeline.items[t-e].classList.add("hide"),timeline.items_infos[t-e].innerHTML="");selectTimeline(selected_in)}function selectTimeline(e){if(timeline.select==timeline.currentSelect){var t=(timeline.items[e].offsetLeft+6)/timeline.container.offsetWidth;timeline.items[e].classList.add("active"),timeline.line.style.transform="scaleX("+t+")",timeline.display_sol.classList.remove("hide"),timeline.display_sol.style.transform="translate("+(timeline.items[e].offsetLeft-50)+"px)",timeline.display_sol.innerHTML="sol "+ressources[timeline.select+e].sol}else if(timeline.select>timeline.currentSelect){timeline.line.style.transform="scaleX(0)";for(var i=timeline.items.length-1;i>=0;i--)timeline.items[i].classList.remove("active"),timeline.display_sol.classList.add("hide")}else if(timeline.select<timeline.currentSelect){timeline.line.style.transform="scaleX(1)";for(var i=timeline.items.length-1;i>=0;i--)timeline.items[i].classList.remove("active"),timeline.display_sol.classList.add("hide")}}function init(){setTimeline(timeline.select),selectTimeline(selected_in),svgInit(),curiosityPath(0,sol_index,!1),void 0!=keys[sol_index+1]&&curiosityPath(sol_index,sol_index+1,!0),keys[sol_index].classList.add("active")}function openModal(){document.getElementById("myModal").style.display="block"}function closeModal(){document.getElementById("myModal").style.display="none"}function plusSlides(e){showSlides(slideIndex+=e)}function currentSlide(e){showSlides(slideIndex=e)}function showSlides(e){var t,i=document.getElementsByClassName("mySlides"),s=document.getElementsByClassName("demo");for(e>i.length&&(slideIndex=1),e<1&&(slideIndex=i.length),t=0;t<i.length;t++)i[t].style.display="none";for(t=0;t<s.length;t++)s[t].className=s[t].className.replace(" active","");i[slideIndex-1].style.display="block",s[slideIndex-1].className+=" active"}var keys=document.querySelectorAll(".key"),curiosity_path_svg=document.querySelector(".curiosity-path svg"),timeline={};if(timeline.items=document.querySelectorAll(".timeline .item"),timeline.previous=document.querySelector(".timeline-controls .previous"),timeline.next=document.querySelector(".timeline-controls .next"),timeline.items_infos=document.querySelectorAll(".timeline .info-item"),timeline.select=selected,timeline.line=document.querySelector(".timeline .line"),timeline.container=document.querySelector(".timeline .line-container"),timeline.display_sol=document.querySelector(".timeline .date-display"),timeline.currentSelect=selected,timeline.previous.addEventListener("click",function(){timeline.select>=10?(timeline.select-=10,timeline.next.classList.remove("hide"),setTimeline(timeline.select),0==timeline.select&&timeline.previous.classList.add("hide")):(timeline.select=0,timeline.previous.classList.add("hide"))}),timeline.next.addEventListener("click",function(){timeline.select<=ressources.length-20?(timeline.select+=10,timeline.previous.classList.remove("hide"),setTimeline(timeline.select)):(timeline.select=110,timeline.next.classList.add("hide"),setTimeline(timeline.select))}),init(),document.addEventListener("keydown",function(e){37==e.keyCode&&0!=sol_index&&keys[sol_index-1].click(),39==e.keyCode&&sol_index!=ressources.length-1&&keys[sol_index+1].click()}),document.addEventListener("keydown",function(e){27!=e.keyCode&&32!=e.keyCode||(e.preventDefault(),closeModal())}),photos){var slideIndex=1;showSlides(slideIndex),document.addEventListener("keydown",function(e){27!=e.keyCode&&32!=e.keyCode||(e.preventDefault(),closeModal())})}var zoom={};zoom.map=document.querySelector(".zoom"),zoom.scale=200,zoom.scale_max=200,zoom.map.style.transform="scale(1)",zoom.map.addEventListener("wheel",function(e){var t=e.pageX,i=e.pageY;zoom.scale+=e.deltaY,zoom.scale<zoom.scale_max&&(zoom.scale=zoom.scale_max);var s=zoom.scale/zoom.scale_max;zoom.map.style.transformOrigin=t+"px "+i+"px",zoom.map.style.transform="scale("+s+")"});